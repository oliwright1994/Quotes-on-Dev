function createNewPostFromInput(){let e=document.querySelectorAll("input"),t={type:"post",format:"standard",status:"pending"};return t.content=document.querySelector("textarea"),t.title=e[0].value,t._qod_quote_source=document.getElementById("quote_source").value,t._qod_quote_source_url=document.getElementById("quote_url").value,t}function displayNotLoggedInError(){document.getElementById("submit-quote-form").remove();let e=document.createElement("h2");e.append(document.createTextNode("Sorry you must be logged in to submit a quote!"));let t=document.createElement("a");t.append(document.createTextNode("Click here to login.")),t.href=api_vars.site_login_url,document.querySelector(".entry-content").append(e),document.querySelector(".entry-content").append(t)}function toggleSubmitForm(){document.getElementById("submit-quote-form").reset,jQuery(document).ready(function(){jQuery("#submit-quote-form").toggle(),jQuery("#submit-another-quote-button").toggle()})}function showStatusMessageOnSubmit(e){let t=document.createElement("h2");t.innerText=e,document.querySelector(".entry-content").append(t)}jQuery(document).ready(function(){jQuery(".submit-button").click(function(){event.preventDefault(),api_vars.user_logged_in?jQuery.ajax({url:api_vars.rest_url+"wp/v2/posts/",method:"post",data:JSON.stringify(createNewPostFromInput()),crossDomain:!0,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.wpapi_nonce)},success:function(){console.log("Post submitted")},error:function(){console.log("Post not submitted")}}).done(function(){toggleSubmitForm(),showStatusMessageOnSubmit(api_vars.success)}).fail(function(){toggleSubmitForm(),showStatusMessageOnSubmit(api_vars.failure)}):displayNotLoggedInError()})}),jQuery;