function createNewPostFromInput(){let e=document.querySelectorAll("input"),t={type:"post",format:"standard",status:"pending"};return t.content=document.querySelector("textarea"),t.excerpt=document.querySelector("textarea"),t.title=e[0].value,t._qod_quote_source=document.getElementById("quote_source").value,t._qod_quote_source_url=document.getElementById("quote_url").value,t}function toggleSubmitForm(){document.getElementById("submit-quote-form").reset,jQuery(document).ready(function(){jQuery("#submit-quote-form").toggle(),jQuery("#submit-another-quote-button").toggle()})}function showStatusMessageOnSubmit(e){let t=document.createElement("h2");t.innerText=e,document.querySelector(".entry-content").append(t)}function displayNotLoggedInError(){document.getElementById("submit-quote-form").remove();let e=document.createElement("h2");e.append(document.createTextNode("Sorry you must be logged in to submit a quote!"));let t=document.createElement("a");t.append(document.createTextNode("Click here to login.")),t.href=api_vars.site_login_url,document.querySelector(".entry-content").append(e),document.querySelector(".entry-content").append(t)}function displayRandomQuote(){jQuery.ajax({url:api_vars.rest_url+"wp/v2/any",method:"GET",crossDomain:!0,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.wpapi_nonce)}}).done(function(e){clearRandomQuote(),jQuery(".front-page-quote").append(e[0].post_content),jQuery('<h1 class="entry-title"><h1>').appendTo(".front-page-quote"),jQuery(".entry-title").append("- "+e[0].post_title),console.log(e),replaceURLWithPostUrl(e)}).fail(function(){jQuery(".front-page-quote").append("Sorry something went wrong!")})}function replaceURLWithPostUrl(e){history.replaceState(null,null,api_vars.site_url+"?page_id="+e[0].ID)}function clearRandomQuote(){jQuery(".front-page-quote").empty()}jQuery(document).ready(function(){jQuery("main").is("#random-quote-homepage")&&displayRandomQuote(),jQuery("#show-another-quote-button").click(function(){displayRandomQuote()}),jQuery(".submit-button").click(function(){event.preventDefault(),api_vars.user_logged_in?jQuery.ajax({url:api_vars.rest_url+"wp/v2/posts/",method:"post",data:JSON.stringify(createNewPostFromInput()),crossDomain:!0,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.wpapi_nonce)},success:function(){console.log("Post submitted")},error:function(){console.log("Post not submitted")}}).done(function(){toggleSubmitForm(),showStatusMessageOnSubmit(api_vars.success)}).fail(function(){toggleSubmitForm(),showStatusMessageOnSubmit(api_vars.failure)}):displayNotLoggedInError()})});